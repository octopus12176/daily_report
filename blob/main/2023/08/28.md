## 2023/8/28（月）

## 取り組んだ課題

- タイピング練習
- プロを目指す人のための Ruby 入門を読む

## わかったこと

- プロを目指す人のための Ruby 入門を読む

  - Ruby は nil も含めて全てがオブジェクト。
  - Ruby ではコメントは`#`を使用する。
  - 数値の 123 や文字列の”Hello”など、ソースコードに直接埋め込むことのできる値のことを`リテラル`と呼ぶ。
  - 変数名は小文字のスネークケースが一般的。

  ## 文字列

  - 以下のような多重代入も可能だが、適切な場面で使用する。

  ```ruby
  a, b = 1, 2
  ```

  - ダブルクォートをだと\n の改行文字や式展開を使用できる。

  ```ruby
  # 改行文字
  puts "こんにちは\nさようなら"
  #=> こんにちは
  # さようなら

  # 式展開
  name = 'Alice'
  puts "Hello, #{name}!"
  #=> "Hello, Alice!"
  ```

  - 文字列を構成するバイト値の具体的な値は bytes メソッドで確認できる。

  ```ruby
  # bytesメソッドを使用すると文字列のバイトが配列で返る
  'a'.bytes
  #=> [97]

  'abc'.bytes
  #=> [97, 98, 99]
  ```

  ## 数値

  - 整数同士の割り算は整数になる。小数点以下の値が必要な場合はどちらかの値に小数点の.0 を付ける。

  ```ruby
  # 0.5ではなく0になる
  1 / 2
  #=> 0

  1.0 / 2
  #=> 0.5
  ```

  - `to_f`メソッドで整数から少数に変更可能。

  ```ruby
  n = 1
  n.to_f
  #=> 1.0

  n.to_f / 2
  #=> 0.5
  ```

  - Ruby では++や—ではなく、`+=`と`-=`で変数の値を増減させる。

  ```ruby
  n = 1

  # nを増やす(n = n + 1と同じ)
  n += 1
  #=> 2

  # nを減らす(n = n -1と同じ)
  n -= 1
  #=> 1

  ```

  - 同様に`*=`、`/=`、`%=`も使用可能。

  ```ruby
  n = 2
  #　nを３倍にする
  n *= 3
  #=> 6

  # nを２で割る
  n /= 2
  #=> 3

  # nを２乗する
  n *= 2
  #=> 9
  ```

  ## 真偽値と条件分岐

  - false または nil であれば偽。それ以外は全て真。
  - データのある/なしで処理を変えたい場合はこの性質を活かして次のようにシンプルに書くことができる。

  ```ruby
  data = find_data
  if data
    'データがあります'
  else
    'データがありません'
  end
  ```

  - if 文では else 節がなく、なおかつどの条件にも当てはまらなかった場合は nil が返る。

  ```ruby
  country = 'italy'

  # if節とelseのどちらの条件にも合致してなかった場合はnilが返る(falseではない)
  greeting =
    if coutry = 'japan'
      'こんにちは'
    elsif country = 'us'
      'Hello'
    end

  greeting
  #=> nil
  ```

  - if は後置が可

  ```ruby
  point = 7
  day = 1
  # 1日であればポイント５倍
  point *= 5 if day == 1
  point
  #=> 35
  ```

  ## メソッドの定義

  - Ruby は最後に評価された式がメソッドの戻り値になるので、return は不要。return は使用できるが、return を使わない書き方の方が主流。
  - return はメソッドを都邑で抜けるのに使われる。

  ## 文字列についてもっと詳しく

  - 文字列は全て String クラスのオブジェクトになる。
  - 文字列は%記法で作ることもできる。%記法を使うとシングルクォーテーションやダブルクォーテーションをバックスラッシュでエスケープする必要がなくなる。

  ```ruby
  # ダブルクオートで囲う場合と同等。
  str = %(Programming language "Ruby")
  puts str
  # => Programming language "Ruby"

  ruby = "Ruby"
  str2 = %(Programming language "#{ruby}")
  puts str2
  # => Programming language "Ruby"

  シングルクオートで囲う場合と同等。
  ruby = "Ruby"
  str = %q(Programming language "#{ruby}")
  puts str
  # => Programming language "#{ruby}"
  ```

  - ヒアドキュメント(行指向文字列リテラル)。以下では TEXT を識別子としているが、自由に付けられる。ヒアドキュメントの中では式展開も可能。

  ```ruby
  a = <<TEXT
  これはヒアドキュメントです。
  複数行にわたる長い文字列を作成するのに便利です。
  TEXT
  puts a
  #=> これはヒアドキュメントです。
  #   複数行にわたる長い文字列を作成するのに便利です。
  ```

  - `sprintf`メソッドを使用すると、指定されたフォーマットの文字列を作成することができる。

  ```ruby
  # 小数第３位まで数字を表示する
  sprintf('%0.3f', 1.2)
  #=> "1.200"

  # 表示したいオブジェクトを複数渡すこともできる。
  sprintf('%0.3f + %0.3f', 1.2, 0.48)
  #=> "1.200 + 0.480"
  ```

  - 文字列を作成する方法色々。

  ```ruby
  # 配列の各要素を連結して１つの文字列にする
  [10, 20, 30].join
  #=> "102030"

  # *演算子を使って文字列を繰り返す
  'Hi!' * 10
  #=> "Hi!Hi!Hi!Hi!Hi!Hi!Hi!Hi!Hi!Hi!"

  # String.newを使って新しい文字列を作る（あまり使わない）
  String.new('hello')
  #=> "hello"
  ```

  - Ruby では文字と文字列の違いはない。

  ## 真偽値と条件分岐についてもっと詳しく

  - Ruby では式全体が真または偽であることが決定するまで左から順に式を評価し、式全体の真または偽が確定すると、式の評価を終了し、最後に評価された式の値を返す。
  - Ruby では if 文以外のところで&&や||を意図的に使う場合がある。

  ```ruby
  # Alice、Bob、Carolと順に検索し、最初に見つかったユーザ(nilまたはfalse以外の値)を変数に格納する
  user = find_user('Alice') || find_user('Bob') || find_user('Carol')

  # 正常なユーザであればメールを送信する（左辺が偽であればメール送信は実行されない）
  user.valid? && send_email_to(user)
  ```

## 感じたこと

- プロを目指す人のための Ruby 入門を読む
  - プロを目指す人のための Ruby 入門を読み始めた。なかなか厚いので読み終わるまで時間がかかりそうだが、着実に自分の頭に定着させていきたい。

## 次やること

- プロを目指す人のための Ruby 入門を読む

## 勉強時間

- Today: 3.0h
- Total: 217.0h
