## 2023/6/8(木)

## 取り組んだ課題

- タイピング練習
- 「Git： もう怖くない Git！チーム開発で必要な Git を完全マスター」視聴
  - セクション 8 の途中~セクション 11 まで

## わかったこと

- 「Git： もう怖くない Git！チーム開発で必要な Git を完全マスター」視聴

  - リベース
    - 変更を統合する際に、履歴を綺麗に整えるために使用するのがリベース
    - git rebase <ブランチ名>
    - ブランチの基点となるコミットを別のコミットに移動する。
      - コミット１から master ブランチと feature ブランチが分岐していて、master ブランチはコミット２、feature ブランチはコミット３というようにコミットが分岐している状態を想定する。
      - 上記の状態から「git rebase master」 を行うと feature ブランチが master ブランチの前に移動する。
        - feature ブランチの基点となっていたコミットがコミット１からコミット２に変わる。
        - master ブランチの変更分(コミット 2 の変更分)が feature ブランチに取り込まれている。
      - ただ master ブランチの変更分を取り込んでいるわけではなく、コミットの履歴を 1 直線にしている。
      - rebase コマンドを使用することで他のブランチでの変更分を自分の中に取り込みながら、履歴を綺麗に整えることができる。
    - リベースとマージの違い
      - リベースは履歴が１直線でマージは履歴が枝分かれしている。
    - リベースでしてはいけないこと
      - GitHub にプッシュしたコミットを rebase するのだけはダメ。
        - もし GitHub にプッシュしたコミットの内容を修正したい場合はコミットの履歴を修正するのではなく、もう一度作業して新しいコミットをしてその内容を修正する。
      - git push -f は絶対 NG
        - このコマンドを使用すると今ある GitHub の内容を上書きして強制的に Push できるが、Git の履歴が完全に壊れるのでダメ、
    - リベースとマージの使い分け
      - マージかリベースかは Git の運用方法次第
        - マージ
          - メリット
            - コンフリクトの解決が比較的簡単
          - デメリット
            - マージコミットがたくさんあると履歴が複雑化する
              - git pull をすると特に何かをしたわけではないのに多くのコミットができ、履歴が複雑化する
        - リベース
          - メリット
            - 履歴を綺麗に保つことができる。
          - デメリット
            - コンフリクトの解決が若干面倒(コミットそれぞれに解消が必要)
        - 作業の履歴を残したいならマージを使う。
        - 履歴を綺麗にしたいならリベースを使う。
        - マージとリベースのコンフリクトの違い
          - マージの場合はコンフリクトが１度しか発生しないが、リベースの場合はコンフリクトが各コミットごとに発生する。
            - リベースはリベースに含まれるコミットが複数あった場合それぞれのコミットごとにリベースを実行して全部のリベースが完了した時点でリベースは完了するという挙動をするため。
          - プッシュしていないローカルの変更にはリベースを使用し、プッシュした後はマージを使用した方がいい。コンフリクトしそうならマージを使う。
    - プルの設定をリベースに変更する
      - プルにはマージ型とリベース型がある。リベース型がおすすめ。
      - マージ型
        - 通常の git pull
        - git pull <リモート名><ブランチ名>
        - マージコミットが残るから、マージしたという記録を残したい場合に使おう
      - リベース型
        - git pull --rebase <リモート名><ブランチ名>
        - マージコミットが残らないから、GitHub の内容を取得したいだけのときは--rebase を使用した方がいい
      - 設定の方法
        - git config --global pull.rebase true
        - git config branch.master.rebase true(matser ブランチで git pull する時だけ)
    - リベースで履歴を書き換える
      - プッシュしていないコミットを整える。
      - 直前のコミットをやり直す
        - git commit --amend
      - 複数のコミットをやり直す
        - git rebase -i <コミット ID>
          - git rebase -i HEAD~3(直前に３つのコミットのやり直し)
            1. git rabase -i コマンドで対話的リベースモードに入る
            2. 修正したいコミットを edit にしてコミットエディタを終了する
            3. edit コミットのところでコミットの適用が止まる
            4. git commit --amend コマンドで修正
            5. git rebase --continue で次のコミットへいく
            6. pick だとそのままのコミット内容を適用して次へいく
            7.
      - コミットを並び替える、削除する
        - git rebase -i <コミット ID>
          - git rebase -i HEAD~3(履歴は古い順から表示で git log とは逆)
          - 削除
            - 行をエディタ上で消す
          - 並び替える
            - エディタ上でコミットの順番を入れ替える
      - コミットをまとめる
        - pick ではなく、squash を指定するとそのコミットを直前のコミットと１つにする
      - コミットを分割する
        - 分割したいコミットの pick という文字を edit に書き換える。
  - タグ付け
    - コミットを参照しやすくなるために分かりやすい名前を付けるのはタグ。よくリリースポイントに用いる。
    - タグの一覧を表示
      - アルファベット順にタグを表示する。
      - git tag
        - git tag -l "201705"(パターンを指定してタグを表示)
    - タグには注釈付き(annotated)版と軽量(lightweight)版の２種類がある。
      - 注釈付き版 ← オススメ
        - 正式なしっかりと情報がついたタグ
        - git tag -a [タグ名] -m "[メッセージ名]"
      - 軽量版
        - 情報量を減らした省略形式のタグ
        - git tag [タグ名]
        - 名前のみ付けられる
        - 後からタグ付けできる。
          - git tag [タグ名] [コミット名]
    - タグのデータを表示
      - git show [タグ名]
      - タグのデータと関連付けられたコミットを表示
    - タグをリモートリポジトリに送信する
      - タグをリモートに送信するには git push コマンドで別途指定する。
      - git push [ブランチ名] [タグ名]
        - タグを一斉に送信する
          - git push origin --tags
          - ローカルにあってリモートリポジトリに存在しないタグを一斉に送信する
  - スタッシュ
    - 作業を１次避難する。
      - git stash
      - git stash save
    - 避難した作業を確認する。
      - git stash list
      - 避難した作業の一覧を表示
    - 避難した作業を復元
      - git stash apply
      - ステージの状況も復元する
        - git stash apply --index
      - 特定の作業を復元する
        - git stash apply [スタッシュ名]
    - 避難した作業を削除
      - git stash drop
      - 最新の作業を削除する
        - 特定の作業を削除する
          - git stash drop [スタッシュ名]
        - 全作業を削除する
          - git stash clear

## 感じたこと

- 「Git： もう怖くない Git！チーム開発で必要な Git を完全マスター」視聴
  - リベースは業務であまり使用して来なかったこともあり、理解不足なところもあるので pull をする際など rebase をする機会を増やして慣れていきたい。
  - 実際のプロジェクトでどれくらいリベースを使用するのかどうかは気になった。pull するときは使うなど方針はあるのか。

## 次やること

- Linuc の問題集
- 「Git によるバージョン管理」視聴

## 勉強時間

- Today: 2.0h
- Total: 91.5h
